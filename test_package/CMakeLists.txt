cmake_minimum_required(VERSION 3.2)
project(example)

include(${CMAKE_BINARY_DIR}/conanbuildinfo.cmake)
conan_basic_setup(TARGETS)

set(CMAKE_CXX_STANDARD 11)
find_package(PythonLibs 2.7 REQUIRED)
find_package(PythonInterp 2.7 REQUIRED)

set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR})
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELEASE ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_DEBUG ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR})
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_RELEASE ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_DEBUG ${CMAKE_RUNTIME_OUTPUT_DIRECTORY})

add_library(example SHARED "example.cpp")
target_include_directories(example PRIVATE ${PYTHON_INCLUDE_DIRS})
target_link_libraries(example PUBLIC CONAN_PKG::pybind11 ${PYTHON_LIBRARY})
SET_TARGET_PROPERTIES(example PROPERTIES PREFIX "")
if(WIN32)
  set_target_properties(example PROPERTIES SUFFIX ".pyd")
elseif(APPLE)
  set_target_properties(example PROPERTIES SUFFIX ".so")
endif()